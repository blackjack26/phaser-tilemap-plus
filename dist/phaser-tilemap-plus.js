!function(t){function e(r){if(n[r])return n[r].exports;var a=n[r]={i:r,l:!1,exports:{}};return t[r].call(a.exports,a,a.exports,e),a.l=!0,a.exports}var n={};e.m=t,e.c=n,e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:r})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="/dist/",e(e.s=4)}([function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=function(){function t(e,n){r(this,t),this.x=e||0,this.y=n||0}return a(t,[{key:"clone",value:function(){return new t(this.x,this.y)}},{key:"equals",value:function(t){return t&&this.x===t.x&&this.y===t.y}},{key:"length",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y)}},{key:"normalized",value:function(){var e=this.length();return 0===e?new t(0,0):new t(this.x/e,this.y/e)}},{key:"perpendicular",value:function(){return new t(-this.y,this.x)}},{key:"rotated",value:function(e){var n=Math.cos(e),r=Math.sin(e);return new t(n*this.x+r*this.y,-r*this.x+n*this.y)}},{key:"plus",value:function(e){return new t(this.x+e.x,this.y+e.y)}},{key:"minus",value:function(e){return new t(this.x-e.x,this.y-e.y)}},{key:"dot",value:function(t){return this.x*t.x+this.y*t.y}},{key:"perpDot",value:function(t){return this.x*t.y-this.y*t.x}},{key:"scale",value:function(e){return new t(this.x*e,this.y*e)}}]),t}();e.default=i},function(t,e,n){"use strict";function r(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=n(0),u=function(t){return t&&t.__esModule?t:{default:t}}(o),l=function(){function t(e,n,r,i){a(this,t),this.left=void 0===e?Number.POSITIVE_INFINITY:e,this.right=void 0===r?Number.NEGATIVE_INFINITY:r,this.top=void 0===n?Number.POSITIVE_INFINITY:n,this.bottom=void 0===i?Number.NEGATIVE_INFINITY:i}return i(t,[{key:"isEmpty",value:function(){return this.left>this.right||this.top>this.bottom}},{key:"width",value:function(){var t=this.right-this.left;return t>=0?t:NaN}},{key:"height",value:function(){var t=this.bottom-this.top;return t>=0?t:NaN}},{key:"centre",value:function(){return new u.default(.5*(this.left+this.right),.5*(this.top+this.bottom))}},{key:"containsPoint",value:function(t){return this.left<=t.x&&t.x<=this.right&&this.top<=t.y&&t.y<=this.bottom}},{key:"containsPoints",value:function(t){var e=!0,n=!1,r=void 0;try{for(var a,i=t[Symbol.iterator]();!(e=(a=i.next()).done);e=!0){var o=a.value;if(!this.containsPoint(o))return!1}}catch(t){n=!0,r=t}finally{try{!e&&i.return&&i.return()}finally{if(n)throw r}}return!0}},{key:"intersects",value:function(t){return this.left<=t.right&&this.right>=t.left&&this.top<=t.bottom&&this.bottom>=t.top}}],[{key:"fromPoints",value:function(e){var n=Number.POSITIVE_INFINITY,a=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY,o=Number.NEGATIVE_INFINITY;return Array.isArray(e)?(n=Math.min.apply(Math,r(e.map(function(t){return t.x}))),a=Math.min.apply(Math,r(e.map(function(t){return t.y}))),i=Math.max.apply(Math,r(e.map(function(t){return t.x}))),o=Math.max.apply(Math,r(e.map(function(t){return t.y})))):(n=e.x,a=e.y,i=e.x,o=e.y),new t(n,a,i,o)}},{key:"fromAABBs",value:function(e){var n=Number.POSITIVE_INFINITY,a=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY,o=Number.NEGATIVE_INFINITY;return Array.isArray(e)?(n=Math.min.apply(Math,r(e.map(function(t){return t.left}))),a=Math.min.apply(Math,r(e.map(function(t){return t.top}))),i=Math.max.apply(Math,r(e.map(function(t){return t.right}))),o=Math.max.apply(Math,r(e.map(function(t){return t.bottom})))):(n=Math.min(n,aabb.left),a=Math.min(a,aabb.top),i=Math.max(i,aabb.right),o=Math.max(o,aabb.bottom)),new t(n,a,i,o)}}]),t}();e.default=l},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function a(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=n(8),l=r(u),s=n(0),f=r(s),c=n(1),h=r(c),y=n(3),p=r(y),v=function(t){return t.reduce(function(t,e){return t+e},0)/t.length},m=function(t,e,n,r){if(t>n)throw new Error("Right must be greater than Left");if(e>r)throw new Error("Bottom must be greater than Top")},d=function(){function t(e){i(this,t),this.vertices=e,this.recompute()}return o(t,[{key:"recompute",value:function(){var t=this.vertices;if(this.aabb=h.default.fromPoints(t),this.edges=[],this.normals=[],this.count=t.length,this.centre=new f.default(v(t.map(function(t){return t.x})),v(t.map(function(t){return t.y}))),this.count>1)for(var e=0;e<this.count;e++){var n=(e+1)%this.count,r=t[n].minus(t[e]);this.edges.push(r);var a=r.normalized().perpendicular(),i=t[e].minus(this.centre);i.dot(a)<0&&(a=a.scale(-1)),this.normals.push(a)}}},{key:"isValid",value:function(){if(this.count<4)return!0;for(var t=0,e=0;e<this.count;e++){var n=(e+1)%this.count,r=this.edges[e].perpDot(this.edges[n]);if(r*t<0)return!1;t=r}return!0}},{key:"projectOntoAxis",value:function(t){var e=new p.default,n=!0,r=!1,a=void 0;try{for(var i,o=this.vertices[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var u=i.value,l=u.dot(t);e.extendTo(l)}}catch(t){r=!0,a=t}finally{try{!n&&o.return&&o.return()}finally{if(r)throw a}}return e}},{key:"rotated",value:function(e){var n=[],r=!0,a=!1,i=void 0;try{for(var o,u=this.vertices[Symbol.iterator]();!(r=(o=u.next()).done);r=!0){var l=o.value,s=new f.default(l.x,l.y).minus(this.centre),c=s.rotated(e),h=this.centre.plus(c);n.push(h)}}catch(t){a=!0,i=t}finally{try{!r&&u.return&&u.return()}finally{if(a)throw i}}return new t(n)}},{key:"translated",value:function(e){return new t(this.vertices.map(function(t){return t.plus(e)}))}}],[{key:"fromRectangle",value:function(e,n,r,a){return m(e,n,r,a),new t([new f.default(e,n),new f.default(r,n),new f.default(r,a),new f.default(e,a)])}},{key:"fromCapsule",value:function(e,n,r,i,o){if(o<3)throw new Error("Specify at least 3 cap segments");m(e,n,r,i);var u=r-e;if(i-n<u)throw new Error("Capsule height must be larger than width");var l=.5*u,s=[].concat(a(Array(o).keys())).map(function(t){return-t*Math.PI/o}),c=.5*(e+r),h=s.map(function(t){return new f.default(Math.cos(t),Math.sin(t)).scale(l)}),y=new f.default(c,n+l),p=h.map(function(t){return y.plus(t)});p.push(new f.default(e,y.y));var v=new f.default(c,i-l);return p=p.concat(h.map(function(t){return v.minus(t)})),p.push(new f.default(r,v.y)),new t(p)}},{key:"generateConvexPolygons",value:function(e){var n=e.map(function(t){return[t.x,t.y]});return l.default.decomp(n).map(function(e){return new t(e.map(function(t){return new f.default(t[0],t[1])}))})}}]),t}();e.default=d},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=function(){function t(){r(this,t),this.makeEmpty()}return a(t,[{key:"extendTo",value:function(t){this.min>t&&(this.min=t),this.max<t&&(this.max=t)}},{key:"containsPoint",value:function(t){return this.min<=t&&t<=this.max}},{key:"containsRange",value:function(t){return this.min<=t.min&&this.max>t.max}},{key:"isEmpty",value:function(){return this.min>this.max}},{key:"makeEmpty",value:function(){this.min=Number.POSITIVE_INFINITY,this.max=Number.NEGATIVE_INFINITY}},{key:"length",value:function(){return this.min>this.max?Number.NaN:this.max-this.min}}],[{key:"intersection",value:function(e,n){var r=new t;return r.min=Math.max(e.min,n.min),r.max=Math.min(e.max,n.max),r.min>r.max&&r.makeEmpty(),r}},{key:"bound",value:function(e,n){var r=new t;return r.min=Math.min(e.min,n.min),r.max=Math.max(e.max,n.max),r}}]),t}();e.default=i},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}var a=n(5),i=r(a),o=n(10),u=r(o),l=n(11),s=r(l),f=n(12),c=r(f);Phaser.Plugin.TilemapPlus=function(t,e){function n(t){return t+"-TilemapPlus"}Phaser.Plugin.call(this,t,e);var r=Phaser.Loader.prototype.tilemap;Phaser.Loader.prototype.tilemap=function(t,e,a,i){r.call(this,t,e,a,i),this.json(n(t),e)};var a=Phaser.GameObjectFactory.prototype.tilemap;Phaser.GameObjectFactory.prototype.tilemap=function(t,e,r,o,u){var l=a.call(this,t,e,r,o,u),s=this.game.cache.getJSON(n(t));return l.plus=new i.default(s,this.game.time,l),l};var o=Phaser.Tilemap.prototype.createLayer;Phaser.Tilemap.prototype.createLayer=function(t,e,n,r){var a=o.call(this,t,e,n,r);return a.plus=new u.default(a),a};var l=Phaser.Tilemap.prototype.addTilesetImage;Phaser.Tilemap.prototype.addTilesetImage=function(t,e,n,r,a,i,o){var u=l.call(this,t,e,n,r,a,i,o);return u.plus=new s.default(u),u};var f=Phaser.GameObjectFactory.prototype.sprite;Phaser.GameObjectFactory.prototype.sprite=function(t,e,n,r,a){var i=f.call(this,t,e,n,r,a);return i.plus=new c.default(i),i}}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=n(6),o=r(i),u=n(7),l=r(u),s=function t(e,n,r){a(this,t),this.tilemapJson=e,this.time=n,this.tilemap=r,this.timer=null,this.tileAnimations=[],this.game=n.game,this.animation=new o.default(e,n,r),this.physics=new l.default(e),this.properties=e.properties||{}};e.default=s},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t){var e=t.tiles;if(e){var n=!0,r=!1,a=void 0;try{for(var o,u=Object.keys(e)[Symbol.iterator]();!(n=(o=u.next()).done);n=!0){var l=o.value,s=e[l],f=s.animation;f&&f.length>0&&i.bind(this)(t,l,f)}}catch(t){r=!0,a=t}finally{try{!n&&u.return&&u.return()}finally{if(r)throw a}}}}function i(t,e,n){var r=n.map(function(t){return{tileId:t.tileid,duration:t.duration}});if(0!==r.length){var a=this.tilemap.tilesets.find(function(e){return e.name===t.name}),i={frames:r,tileset:a,tileLocations:u.bind(this)(a.firstgid+parseInt(e)),currentFrame:0,currentDuration:0};this.tileAnimations.push(i)}}function o(){var t=this.time.elapsedMS,e=!1,n=!0,r=!1,a=void 0;try{for(var i,o=this.tileAnimations[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var u=i.value,l=u.frames,s=u.tileset,f=u.tileLocations,c=u.currentFrame,h=l[c].duration;if(u.currentDuration+=t,u.currentDuration>h){u.currentDuration-=h,u.currentFrame=(c+1)%l.length;var y=s.firstgid+l[u.currentFrame].tileId,p=!0,v=!1,m=void 0;try{for(var d,b=f[Symbol.iterator]();!(p=(d=b.next()).done);p=!0){var g=d.value;this.tilemap.getTile(g.x,g.y,g.layer,!0).index=y}}catch(t){v=!0,m=t}finally{try{!p&&b.return&&b.return()}finally{if(v)throw m}}e=!0}}}catch(t){r=!0,a=t}finally{try{!n&&o.return&&o.return()}finally{if(r)throw a}}if(e){var w=!0,x=!1,N=void 0;try{for(var I,M=this.tilemap.layers[Symbol.iterator]();!(w=(I=M.next()).done);w=!0){I.value.dirty=!0}}catch(t){x=!0,N=t}finally{try{!w&&M.return&&M.return()}finally{if(x)throw N}}}}function u(t){var e=[],n=!0,r=!1,a=void 0;try{for(var i,o=this.tilemapJson.layers[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var u=i.value;if("tilelayer"===u.type)for(var l=u.data,s=u.width,f=u.height,c=0;c<f;c++)for(var h=0;h<s;h++)l[c*s+h]===t&&e.push({x:h,y:c,layer:u.name})}}catch(t){r=!0,a=t}finally{try{!n&&o.return&&o.return()}finally{if(r)throw a}}return e}Object.defineProperty(e,"__esModule",{value:!0});var l=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=function(){function t(e,n,a){r(this,t),this.tilemapJson=e,this.time=n,this.tilemap=a,this.timer=null,this.tileAnimations=[],this.game=n.game}return l(t,[{key:"enable",value:function(){var t=this;if(null==this.timer){var e=!0,n=!1,r=void 0;try{for(var i,u=this.tilemapJson.tilesets[Symbol.iterator]();!(e=(i=u.next()).done);e=!0){var l=i.value;l.tiles&&a.bind(this)(l)}}catch(t){n=!0,r=t}finally{try{!e&&u.return&&u.return()}finally{if(n)throw r}}this.timer=this.time.events.loop(20,function(){return o.bind(t)()})}}},{key:"disable",value:function(){null!=this.timer&&(this.time.events.remove(this.timer),this.timer=null,this.tileAnimations=[])}}]),t}();e.default=s},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=n(0),u=r(o),l=n(2),s=r(l),f=n(3),c=r(f),h=n(1),y=r(h),p=n(9),v=r(p),m=function(){function t(e){a(this,t),this.tilemapJson=e,this.shapes=[],this.quadTree=new v.default([],1,1)}return i(t,[{key:"enableObjectLayer",value:function(t){var e=this.tilemapJson.layers.find(function(e){return"objectgroup"===e.type&&e.name===t});if(!e)throw new Error('No object layer found with name "'+t+'"');this.shapes=[];var n=!0,r=!1,a=void 0;try{for(var i,o=e.objects[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var u=i.value;u.polygon?this.addPolygon(u):u.polyline||u.ellipse||u.gid||u.text||this.addRectangle(u)}}catch(t){r=!0,a=t}finally{try{!n&&o.return&&o.return()}finally{if(r)throw a}}this.quadTree=new v.default(this.shapes,5,5)}},{key:"collideWith",value:function(t){var e=t.body,n=t.game.physics.arcade.gravity,r=new u.default(n.x,n.y),a=(r.normalized(),new u.default(e.velocity.x,e.velocity.y));e.contactNormal||(e.contactNormal=new u.default),e.contactNormal.x=e.contactNormal.y=0;var i=new u.default,o=0,l=new y.default(e.x-1,e.y-1,e.x+e.width+1,e.y+e.height+1),s=this.quadTree.candidateShapes(l),f=!0,c=!1,h=void 0;try{for(var p,v=s[Symbol.iterator]();!(f=(p=v.next()).done);f=!0){var m=p.value,d=m.collideWidth(e);if(d){var b=d.penetration,g=d.normal;if(!(a.dot(g)>=0)){e.contactNormal=e.contactNormal.plus(g),i=i.plus(b);var w=m.properties,x=w&&w.bounce;x&&(o+=x)}}}}catch(t){c=!0,h=t}finally{try{!f&&v.return&&v.return()}finally{if(c)throw h}}e.x-=i.x,e.y-=i.y,e.contactNormal=e.contactNormal.normalized();var N=e.contactNormal,I=a.dot(N),M=N.scale(I),T=a.minus(M),P=void 0;P=M.scale(-o);var k=T,_=P.plus(k);e.velocity.x=_.x,e.velocity.y=_.y}},{key:"addRectangle",value:function(t){var e=t.width,n=t.height,r=new u.default(e,0),a=new u.default(0,n),i=-t.rotation*Math.PI/180;i&&(r=r.rotated(i),a=a.rotated(i));var o={x:t.x,y:t.y,width:t.width,height:t.height,polygon:[{x:0,y:0},r,r.plus(a),a],properties:t.properties};this.addPolygon(o)}},{key:"addPolygon",value:function(t){var e=t.polygon.map(function(e){return new u.default(t.x+e.x,t.y+e.y)}),n=s.default.generateConvexPolygons(e),r=!0,a=!1,i=void 0;try{for(var o,l=n[Symbol.iterator]();!(r=(o=l.next()).done);r=!0){var f=o.value;this.addConvexPolygon(f,t.properties)}}catch(t){a=!0,i=t}finally{try{!r&&l.return&&l.return()}finally{if(a)throw i}}}},{key:"addConvexPolygon",value:function(t,e){var n=Number.POSITIVE_INFINITY,r=Number.POSITIVE_INFINITY,a=Number.NEGATIVE_INFINITY,i=Number.NEGATIVE_INFINITY,o=!0,l=!1,f=void 0;try{for(var h,y=t.vertices[Symbol.iterator]();!(o=(h=y.next()).done);o=!0){var p=h.value;n=Math.min(n,p.x),r=Math.min(n,p.y),a=Math.max(a,p.x),i=Math.max(i,p.y)}}catch(t){l=!0,f=t}finally{try{!o&&y.return&&y.return()}finally{if(l)throw f}}var v={type:"polygon",left:n,top:r,right:a,bottom:i,polygon:t,properties:e,collideWidth:function(t){var e=t.sprite,n=new u.default(e.x,e.y),r=t.x,a=t.x+t.width,i=t.y,o=t.y+t.height,l=void 0,f=void 0;t.plus&&t.plus.shape?(f=t.plus.shape.translated(n),l=f.normals.concat(this.polygon.normals)):(f=s.default.fromRectangle(r,i,a,o),l=[new u.default(1,0),new u.default(0,1)].concat(this.polygon.normals));var h=Number.POSITIVE_INFINITY,y=void 0,p=!0,v=!1,m=void 0;try{for(var d,b=l[Symbol.iterator]();!(p=(d=b.next()).done);p=!0){var g=d.value,w=this.polygon.projectOntoAxis(g),x=f.projectOntoAxis(g);if(c.default.intersection(w,x).isEmpty())return null;var N=Math.min(Math.abs(w.max-x.min),Math.abs(x.max-w.min));h>N&&(h=N,y=g)}}catch(t){v=!0,m=t}finally{try{!p&&b.return&&b.return()}finally{if(v)throw m}}return f.centre.minus(this.polygon.centre).dot(y)<0&&(y=y.scale(-1)),{penetration:y.scale(-h),normal:y}}};this.shapes.push(v)}}]),t}();e.default=m},function(t,e){function n(t,e,n){n=n||0;var r,a,i,o,u,l,s,f=[0,0];return r=t[1][1]-t[0][1],a=t[0][0]-t[1][0],i=r*t[0][0]+a*t[0][1],o=e[1][1]-e[0][1],u=e[0][0]-e[1][0],l=o*e[0][0]+u*e[0][1],s=r*u-o*a,P(s,0,n)||(f[0]=(u*i-a*l)/s,f[1]=(r*l-o*i)/s),f}function r(t,e,n,r){var a=e[0]-t[0],i=e[1]-t[1],o=r[0]-n[0],u=r[1]-n[1];if(o*i-u*a==0)return!1;var l=(a*(n[1]-t[1])+i*(t[0]-n[0]))/(o*i-u*a),s=(o*(t[1]-n[1])+u*(n[0]-t[0]))/(u*a-o*i);return l>=0&&l<=1&&s>=0&&s<=1}function a(t,e,n){return(e[0]-t[0])*(n[1]-t[1])-(n[0]-t[0])*(e[1]-t[1])}function i(t,e,n){return a(t,e,n)>0}function o(t,e,n){return a(t,e,n)>=0}function u(t,e,n){return a(t,e,n)<0}function l(t,e,n){return a(t,e,n)<=0}function s(t,e,n,r){if(r){var i=k,o=_;i[0]=e[0]-t[0],i[1]=e[1]-t[1],o[0]=n[0]-e[0],o[1]=n[1]-e[1];var u=i[0]*o[0]+i[1]*o[1],l=Math.sqrt(i[0]*i[0]+i[1]*i[1]),s=Math.sqrt(o[0]*o[0]+o[1]*o[1]);return Math.acos(u/(l*s))<r}return 0===a(t,e,n)}function f(t,e){var n=e[0]-t[0],r=e[1]-t[1];return n*n+r*r}function c(t,e){var n=t.length;return t[e<0?e%n+n:e%n]}function h(t){t.length=0}function y(t,e,n,r){for(var a=n;a<r;a++)t.push(e[a])}function p(t){for(var e=0,n=t,r=1;r<t.length;++r)(n[r][1]<n[e][1]||n[r][1]===n[e][1]&&n[r][0]>n[e][0])&&(e=r);i(c(t,e-1),c(t,e),c(t,e+1))||v(t)}function v(t){for(var e=[],n=t.length,r=0;r!==n;r++)e.push(t.pop());for(var r=0;r!==n;r++)t[r]=e[r]}function m(t,e){return u(c(t,e-1),c(t,e),c(t,e+1))}function d(t,e,r){var a,i,u=E,s=O;if(o(c(t,e+1),c(t,e),c(t,r))&&l(c(t,e-1),c(t,e),c(t,r)))return!1;i=f(c(t,e),c(t,r));for(var h=0;h!==t.length;++h)if((h+1)%t.length!==e&&h!==e&&o(c(t,e),c(t,r),c(t,h+1))&&l(c(t,e),c(t,r),c(t,h))&&(u[0]=c(t,e),u[1]=c(t,r),s[0]=c(t,h),s[1]=c(t,h+1),a=n(u,s),f(c(t,e),a)<i))return!1;return!0}function b(t,e,n,r){var a=r||[];if(h(a),e<n)for(var i=e;i<=n;i++)a.push(t[i]);else{for(var i=0;i<=n;i++)a.push(t[i]);for(var i=e;i<t.length;i++)a.push(t[i])}return a}function g(t){for(var e=[],n=[],r=[],a=[],i=Number.MAX_VALUE,o=0;o<t.length;++o)if(m(t,o))for(var u=0;u<t.length;++u)if(d(t,o,u)){n=g(b(t,o,u,a)),r=g(b(t,u,o,a));for(var l=0;l<r.length;l++)n.push(r[l]);n.length<i&&(e=n,i=n.length,e.push([c(t,o),c(t,u)]))}return e}function w(t){var e=g(t);return e.length>0?x(t,e):[t]}function x(t,e){if(0===e.length)return[t];if(e instanceof Array&&e.length&&e[0]instanceof Array&&2===e[0].length&&e[0][0]instanceof Array){for(var n=[t],r=0;r<e.length;r++)for(var a=e[r],i=0;i<n.length;i++){var o=n[i],u=x(o,a);if(u){n.splice(i,1),n.push(u[0],u[1]);break}}return n}var a=e,r=t.indexOf(a[0]),i=t.indexOf(a[1]);return-1!==r&&-1!==i&&[b(t,r,i),b(t,i,r)]}function N(t){var e,n=t;for(e=0;e<n.length-1;e++)for(var a=0;a<e-1;a++)if(r(n[e],n[e+1],n[a],n[a+1]))return!1;for(e=1;e<n.length-2;e++)if(r(n[0],n[n.length-1],n[e],n[e+1]))return!1;return!0}function I(t,e,n,r,a){a=a||0;var i=e[1]-t[1],o=t[0]-e[0],u=i*t[0]+o*t[1],l=r[1]-n[1],s=n[0]-r[0],f=l*n[0]+s*n[1],c=i*s-l*o;return P(c,0,a)?[0,0]:[(s*u-o*f)/c,(i*f-l*u)/c]}function M(t,e,n,r,a,s,h){s=s||100,h=h||0,a=a||25,e=void 0!==e?e:[],n=n||[],r=r||[];var p=[0,0],v=[0,0],d=[0,0],b=0,g=0,w=0,x=0,N=0,T=0,P=0,k=[],_=[],E=t,O=t;if(O.length<3)return e;if(++h>s)return console.warn("quickDecomp: max level ("+s+") reached."),e;for(var A=0;A<t.length;++A)if(m(E,A)){n.push(E[A]),b=g=Number.MAX_VALUE;for(var S=0;S<t.length;++S)i(c(E,A-1),c(E,A),c(E,S))&&l(c(E,A-1),c(E,A),c(E,S-1))&&(d=I(c(E,A-1),c(E,A),c(E,S),c(E,S-1)),u(c(E,A+1),c(E,A),d)&&(w=f(E[A],d))<g&&(g=w,v=d,T=S)),i(c(E,A+1),c(E,A),c(E,S+1))&&l(c(E,A+1),c(E,A),c(E,S))&&(d=I(c(E,A+1),c(E,A),c(E,S),c(E,S+1)),i(c(E,A-1),c(E,A),d)&&(w=f(E[A],d))<b&&(b=w,p=d,N=S));if(T===(N+1)%t.length)d[0]=(v[0]+p[0])/2,d[1]=(v[1]+p[1])/2,r.push(d),A<N?(y(k,E,A,N+1),k.push(d),_.push(d),0!==T&&y(_,E,T,E.length),y(_,E,0,A+1)):(0!==A&&y(k,E,A,E.length),y(k,E,0,N+1),k.push(d),_.push(d),y(_,E,T,A+1));else{if(T>N&&(N+=t.length),x=Number.MAX_VALUE,N<T)return e;for(var S=T;S<=N;++S)o(c(E,A-1),c(E,A),c(E,S))&&l(c(E,A+1),c(E,A),c(E,S))&&(w=f(c(E,A),c(E,S)))<x&&(x=w,P=S%t.length);A<P?(y(k,E,A,P+1),0!==P&&y(_,E,P,O.length),y(_,E,0,A+1)):(0!==A&&y(k,E,A,O.length),y(k,E,0,P+1),y(_,E,P,A+1))}return k.length<_.length?(M(k,e,n,r,a,s,h),M(_,e,n,r,a,s,h)):(M(_,e,n,r,a,s,h),M(k,e,n,r,a,s,h)),e}return e.push(t),e}function T(t,e){for(var n=0,r=t.length-1;t.length>3&&r>=0;--r)s(c(t,r-1),c(t,r),c(t,r+1),e)&&(t.splice(r%t.length,1),n++);return n}function P(t,e,n){return n=n||0,Math.abs(t-e)<n}t.exports={decomp:w,quickDecomp:M,isSimple:N,removeCollinearPoints:T,makeCCW:p};var k=[],_=[],E=[],O=[]},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=n(0),u=(r(o),n(1)),l=r(u),s=function(){function t(e,n,r){if(a(this,t),this.maxLevel=n,this.maxShapes=r,e.length<r||n<=1)this.shapes=e;else{var i=l.default.fromAABBs(e.map(function(t){return t.polygon.aabb})),o=i.centre();this.pivot=o;var u=[],s=[],f=[],c=[],h=[],y=!0,p=!1,v=void 0;try{for(var m,d=e[Symbol.iterator]();!(y=(m=d.next()).done);y=!0){var b=m.value,g=b.polygon.aabb;g.right<o.x&&g.bottom<o.y?s.push(b):g.left>o.x&&g.bottom<o.y?f.push(b):g.right<o.x&&g.top>o.y?c.push(b):g.left>o.x&&g.top>o.y?h.push(b):u.push(b)}}catch(t){p=!0,v=t}finally{try{!y&&d.return&&d.return()}finally{if(p)throw v}}this.shapes=u,s.length>0&&(this.topLeftNode=new t(s,n-1,r)),f.length>0&&(this.topRightNode=new t(f,n-1,r)),c.length>0&&(this.bottomLeftNode=new t(c,n-1,r)),h.length>0&&(this.bottomRightNode=new t(h,n-1,r))}}return i(t,[{key:"candidateShapes",value:function(t){var e=this.shapes.filter(function(e){return e.polygon.aabb.intersects(t)}),n=this.pivot;if(!n)return e;var r=this.topLeftNode;r&&t.left<=n.x&&t.top<=n.y&&(e=e.concat(r.candidateShapes(t)));var a=this.topRightNode;a&&t.right>=n.x&&t.top<=n.y&&(e=e.concat(a.candidateShapes(t)));var i=this.bottomLeftNode;i&&t.left<=n.x&&t.bottom>=n.y&&(e=e.concat(i.candidateShapes(t)));var o=this.bottomRightNode;return o&&t.right>=n.x&&t.bottom>=n.y&&(e=e.concat(o.candidateShapes(t))),e}}]),t}();e.default=s},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var a=function t(e){r(this,t),this.properties=e.layer.properties||{}};e.default=a},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var a=function t(e){r(this,t),this.properties=e.properties||{}};e.default=a},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=n(2),o=function(t){return t&&t.__esModule?t:{default:t}}(i),u=function(){function t(e){r(this,t),this.sprite=e}return a(t,[{key:"setBodyCapsule",value:function(t,e,n){var r=this.sprite;if(!r.body)throw new Error("Enable arcade physics before assigning body shape");var a=r.body;a.plus=a.plus||{};var i=.5*t,u=.5*e;a.plus.shape=o.default.fromCapsule(-i,-u,+i,+u,n)}}]),t}();e.default=u}]);