!function(t){function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}var e={};n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:r})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},n.p="/dist/",n(n.s=2)}([function(t,n,e){"use strict";function r(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}var i=function(){function t(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(n,e,r){return e&&t(n.prototype,e),r&&t(n,r),n}}(),a=function(){function t(n,e){r(this,t),this.x=n||0,this.y=e||0}return i(t,[{key:"clone",value:function(){return new t(this.x,this.y)}},{key:"length",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y)}},{key:"normalized",value:function(){var n=this.length();return 0===n?new t(0,0):new t(this.x/n,this.y/n)}},{key:"perpendicular",value:function(){return new t(-this.y,this.x)}}],[{key:"sum",value:function(n,e){return new t(n.x+e.x,n.y+e.y)}},{key:"difference",value:function(n,e){return new t(n.x-e.x,n.y-e.y)}},{key:"dot",value:function(t,n){return t.x*n.x+t.y*n.y}},{key:"perpDot",value:function(t,n){return t.x*n.y-t.y*n.x}},{key:"scale",value:function(n,e){return new t(n.x*e,n.y*e)}}]),t}();n.a=a},function(t,n,e){"use strict";function r(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}var i=function(){function t(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(n,e,r){return e&&t(n.prototype,e),r&&t(n,r),n}}(),a=function(){function t(){r(this,t),this.min=Number.POSITIVE_INFINITY,this.max=Number.NEGATIVE_INFINITY}return i(t,[{key:"extendTo",value:function(t){this.min>t&&(this.min=t),this.max<t&&(this.max=t)}},{key:"containsPoint",value:function(t){return this.min<=t&&t<=this.max}},{key:"containsRange",value:function(t){return this.min<=t.min&&this.max>t.max}},{key:"isEmpty",value:function(){return this.min>this.max}},{key:"length",value:function(){return this.min>this.max?Number.NaN:this.max-this.min}}],[{key:"intersection",value:function(n,e){var r=new t;return r.min=Math.max(n.min,e.min),r.max=Math.min(n.max,e.max),r}},{key:"bound",value:function(n,e){var r=new t;return r.min=Math.min(n.min,e.min),r.max=Math.max(n.max,e.max),r}}]),t}();n.a=a},function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e(3);Phaser.Plugin.TilemapPlus=function(t,n){function e(t){return t+"-TilemapPlus"}Phaser.Plugin.call(this,t,n),Phaser.Loader.prototype.tilemapPlus=function(t,n,r,i){this.tilemap(t,n,r,i),this.json(e(t),n)},Phaser.GameObjectFactory.prototype.tilemapPlus=function(t,n,i,a,o){var u=this.tilemap(t,n,i,a,o),l=this.game.cache.getJSON(e(t));return u.plus=new r.a(l,this.game.time,u),u}}},function(t,n,e){"use strict";function r(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}var i=e(4),a=e(5),o=function t(n,e,o){r(this,t),this.tilemapJson=n,this.time=e,this.tilemap=o,this.timer=null,this.tileAnimations=[],this.game=e.game,this.animation=new i.a(n,e,o),this.physics=new a.a(n)};n.a=o},function(t,n,e){"use strict";function r(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function i(t){var n=!0,e=!1,r=void 0;try{for(var i,o=Object.values(t.tiles)[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var u=i.value,l=u.animation;l&&l.length>0&&a.bind(this)(t,l)}}catch(t){e=!0,r=t}finally{try{!n&&o.return&&o.return()}finally{if(e)throw r}}}function a(t,n){var e=n.map(function(t){return t.tileid}),r=n.find(function(){return!0}).duration,i=this.tilemap.tilesets.find(function(n){return n.name===t.name}),a={tiles:e,frameInterval:r,tileset:i,tileLocations:u.bind(this)(e),currentFrame:0};this.tileAnimations.push(a)}function o(){var t=this.time.now,n=!1,e=!0,r=!1,i=void 0;try{for(var a,o=this.tileAnimations[Symbol.iterator]();!(e=(a=o.next()).done);e=!0){var u=a.value,l=u.tiles,s=u.frameInterval,f=u.tileset,c=u.tileLocations,h=u.currentFrame,v=Math.floor(t/s)%l.length;if(v!=h){var y=f.firstgid+l[v],m=!0,p=!1,d=void 0;try{for(var g,x=c[Symbol.iterator]();!(m=(g=x.next()).done);m=!0){var b=g.value;this.tilemap.getTile(b.x,b.y,b.layer,!0).index=y}}catch(t){p=!0,d=t}finally{try{!m&&x.return&&x.return()}finally{if(p)throw d}}u.currentFrame=v,n=!0}}}catch(t){r=!0,i=t}finally{try{!e&&o.return&&o.return()}finally{if(r)throw i}}if(n){var w=!0,k=!1,I=void 0;try{for(var N,P=this.tilemap.layers[Symbol.iterator]();!(w=(N=P.next()).done);w=!0){N.value.dirty=!0}}catch(t){k=!0,I=t}finally{try{!w&&P.return&&P.return()}finally{if(k)throw I}}}}function u(t){var n=[],e=!0,r=!1,i=void 0;try{for(var a,o=this.tilemapJson.layers[Symbol.iterator]();!(e=(a=o.next()).done);e=!0){var u=a.value;if("tilelayer"===u.type)for(var l=u.data,s=u.width,f=u.height,c=0;c<f;c++)for(var h=0;h<s;h++)t.includes(l[c*s+h]-1)&&n.push({x:h,y:c,layer:u.name})}}catch(t){r=!0,i=t}finally{try{!e&&o.return&&o.return()}finally{if(r)throw i}}return n}var l=function(){function t(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(n,e,r){return e&&t(n.prototype,e),r&&t(n,r),n}}(),s=function(){function t(n,e,i){r(this,t),this.tilemapJson=n,this.time=e,this.tilemap=i,this.timer=null,this.tileAnimations=[],this.game=e.game}return l(t,[{key:"enable",value:function(){var t=this;if(null==this.timer){var n=!0,e=!1,r=void 0;try{for(var a,u=this.tilemapJson.tilesets[Symbol.iterator]();!(n=(a=u.next()).done);n=!0){var l=a.value;l.tiles&&i.bind(this)(l)}}catch(t){e=!0,r=t}finally{try{!n&&u.return&&u.return()}finally{if(e)throw r}}this.timer=this.time.events.loop(20,function(){return o.bind(t)()})}}},{key:"disable",value:function(){null!=this.timer&&(this.time.events.remove(this.timer),this.timer=null,this.tileAnimations=[])}}]),t}();n.a=s},function(t,n,e){"use strict";function r(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}var i=e(0),a=e(6),o=e(1),u=function(){function t(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(n,e,r){return e&&t(n.prototype,e),r&&t(n,r),n}}(),l=function(){function t(n){r(this,t),this.tilemapJson=n,this.shapes=[],this.gravity=new i.a(0,1e3)}return u(t,[{key:"enableObjectLayer",value:function(t){var n=this.tilemapJson.layers.find(function(n){return"objectgroup"===n.type&&n.name===t});if(!n)throw new Error('No object layer found with name "'+t+'"');this.shapes=[];var e=!0,r=!1,i=void 0;try{for(var a,o=n.objects[Symbol.iterator]();!(e=(a=o.next()).done);e=!0){var u=a.value;u.polygon?this.addPolygon(u):u.polyline||u.ellipse||u.gid||u.text||this.addRectangle(u)}}catch(t){r=!0,i=t}finally{try{!e&&o.return&&o.return()}finally{if(r)throw i}}}},{key:"collideWith",value:function(t){var n=t.body;n.contactNormal={x:0,y:0};var e=!0,r=!1,a=void 0;try{for(var o,u=this.shapes[Symbol.iterator]();!(e=(o=u.next()).done);e=!0){var l=o.value,s=l.collideWidth(n),f=n.velocity;if(s){var c=s.penetration,h=s.normal;n.contactNormal=h,n.x-=c.x,n.y-=c.y;var v=i.a.dot(f,h);if(v>=0)continue;var y=i.a.scale(h,v),m=i.a.difference(f,y),p=void 0,d=l.properties&&l.properties.bounce;p=d?i.a.scale(y,-d):new i.a;var g=m,x=i.a.sum(p,g);n.velocity.x=x.x,n.velocity.y=x.y}}}catch(t){r=!0,a=t}finally{try{!e&&u.return&&u.return()}finally{if(r)throw a}}}},{key:"addRectangle",value:function(t){var n=t.width,e=t.height,r={x:t.x,y:t.y,width:t.width,height:t.height,polygon:[{x:0,y:0},{x:n,y:0},{x:n,y:e},{x:0,y:e}],properties:t.properties};this.addPolygon(r)}},{key:"addPolygon",value:function(t){var n=t.polygon.map(function(n){return new i.a(t.x+n.x,t.y+n.y)}),e=a.a.generateConvexPolygons(n),r=!0,o=!1,u=void 0;try{for(var l,s=e[Symbol.iterator]();!(r=(l=s.next()).done);r=!0){var f=l.value;this.addConvexPolygon(f,t.properties)}}catch(t){o=!0,u=t}finally{try{!r&&s.return&&s.return()}finally{if(o)throw u}}}},{key:"addConvexPolygon",value:function(t,n){var e=Number.POSITIVE_INFINITY,r=Number.POSITIVE_INFINITY,u=Number.NEGATIVE_INFINITY,l=Number.NEGATIVE_INFINITY,s=!0,f=!1,c=void 0;try{for(var h,v=t.vertices[Symbol.iterator]();!(s=(h=v.next()).done);s=!0){var y=h.value;e=Math.min(e,y.x),r=Math.min(e,y.y),u=Math.max(e,y.x),l=Math.max(e,y.y)}}catch(t){f=!0,c=t}finally{try{!s&&v.return&&v.return()}finally{if(f)throw c}}var m={type:"polygon",left:e,top:r,right:u,bottom:l,polygon:t,properties:n,collideWidth:function(t){var n=t.x,e=t.x+t.width,r=t.y,u=t.y+t.height,l=[new i.a(1,0),new i.a(0,1)].concat(this.polygon.normals),s=a.a.fromRectangle(n,r,e,u),f=Number.POSITIVE_INFINITY,c=void 0,h=!0,v=!1,y=void 0;try{for(var m,p=l[Symbol.iterator]();!(h=(m=p.next()).done);h=!0){var d=m.value,g=this.polygon.projectOntoAxis(d),x=s.projectOntoAxis(d);if(o.a.intersection(g,x).isEmpty())return null;var b=Math.min(Math.abs(g.max-x.min),Math.abs(x.max-g.min));f>b&&(f=b,c=d)}}catch(t){v=!0,y=t}finally{try{!h&&p.return&&p.return()}finally{if(v)throw y}}var w=i.a.difference(s.centre,this.polygon.centre);return i.a.dot(w,c)<0&&(c=i.a.scale(c,-1)),{penetration:i.a.scale(c,-f),normal:c}}};this.shapes.push(m)}}]),t}();n.a=l},function(t,n,e){"use strict";function r(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}var i=e(7),a=e.n(i),o=e(0),u=e(1),l=function(){function t(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(n,e,r){return e&&t(n.prototype,e),r&&t(n,r),n}}(),s=function(t){return t.reduce(function(t,n){return t+n},0)/t.length},f=function(){function t(n){if(r(this,t),this.vertices=n,this.edges=[],this.normals=[],this.count=this.vertices.length,this.centre=new o.a(s(n.map(function(t){return t.x})),s(n.map(function(t){return t.y}))),this.count>1)for(var e=0;e<this.count;e++){var i=(e+1)%this.count,a=o.a.difference(n[i],n[e]);this.edges.push(a);var u=a.normalized().perpendicular(),l=o.a.difference(n[e],this.centre);o.a.dot(l,u)<0&&(u=o.a.scale(u,-1)),this.normals.push(u)}}return l(t,[{key:"isValid",value:function(){if(this.count<4)return!0;for(var t=0,n=0;n<this.count;n++){var e=(n+1)%this.count,r=o.a.perpDot(this.edges[n],this.edges[e]);if(r*t<0)return!1;t=r}return!0}},{key:"projectOntoAxis",value:function(t){var n=new u.a,e=!0,r=!1,i=void 0;try{for(var a,l=this.vertices[Symbol.iterator]();!(e=(a=l.next()).done);e=!0){var s=a.value,f=o.a.dot(s,t);n.extendTo(f)}}catch(t){r=!0,i=t}finally{try{!e&&l.return&&l.return()}finally{if(r)throw i}}return n}}],[{key:"fromRectangle",value:function(n,e,r,i){return new t([new o.a(n,e),new o.a(r,e),new o.a(r,i),new o.a(n,i)])}},{key:"generateConvexPolygons",value:function(n){var e=n.map(function(t){return[t.x,t.y]});return a.a.decomp(e).map(function(n){return new t(n.map(function(t){return new o.a(t[0],t[1])}))})}}]),t}();n.a=f;var c=f.generateConvexPolygons([new o.a(0,0),new o.a(1,0),new o.a(.4,.4),new o.a(0,1)]);console.log(c)},function(t,n){function e(t,n,e){e=e||0;var r,i,a,o,u,l,s,f=[0,0];return r=t[1][1]-t[0][1],i=t[0][0]-t[1][0],a=r*t[0][0]+i*t[0][1],o=n[1][1]-n[0][1],u=n[0][0]-n[1][0],l=o*n[0][0]+u*n[0][1],s=r*u-o*i,T(s,0,e)||(f[0]=(u*a-i*l)/s,f[1]=(r*l-o*a)/s),f}function r(t,n,e,r){var i=n[0]-t[0],a=n[1]-t[1],o=r[0]-e[0],u=r[1]-e[1];if(o*a-u*i==0)return!1;var l=(i*(e[1]-t[1])+a*(t[0]-e[0]))/(o*a-u*i),s=(o*(t[1]-e[1])+u*(e[0]-t[0]))/(u*i-o*a);return l>=0&&l<=1&&s>=0&&s<=1}function i(t,n,e){return(n[0]-t[0])*(e[1]-t[1])-(e[0]-t[0])*(n[1]-t[1])}function a(t,n,e){return i(t,n,e)>0}function o(t,n,e){return i(t,n,e)>=0}function u(t,n,e){return i(t,n,e)<0}function l(t,n,e){return i(t,n,e)<=0}function s(t,n,e,r){if(r){var a=E,o=M;a[0]=n[0]-t[0],a[1]=n[1]-t[1],o[0]=e[0]-n[0],o[1]=e[1]-n[1];var u=a[0]*o[0]+a[1]*o[1],l=Math.sqrt(a[0]*a[0]+a[1]*a[1]),s=Math.sqrt(o[0]*o[0]+o[1]*o[1]);return Math.acos(u/(l*s))<r}return 0===i(t,n,e)}function f(t,n){var e=n[0]-t[0],r=n[1]-t[1];return e*e+r*r}function c(t,n){var e=t.length;return t[n<0?n%e+e:n%e]}function h(t){t.length=0}function v(t,n,e,r){for(var i=e;i<r;i++)t.push(n[i])}function y(t){for(var n=0,e=t,r=1;r<t.length;++r)(e[r][1]<e[n][1]||e[r][1]===e[n][1]&&e[r][0]>e[n][0])&&(n=r);a(c(t,n-1),c(t,n),c(t,n+1))||m(t)}function m(t){for(var n=[],e=t.length,r=0;r!==e;r++)n.push(t.pop());for(var r=0;r!==e;r++)t[r]=n[r]}function p(t,n){return u(c(t,n-1),c(t,n),c(t,n+1))}function d(t,n,r){var i,a,u=O,s=A;if(o(c(t,n+1),c(t,n),c(t,r))&&l(c(t,n-1),c(t,n),c(t,r)))return!1;a=f(c(t,n),c(t,r));for(var h=0;h!==t.length;++h)if((h+1)%t.length!==n&&h!==n&&o(c(t,n),c(t,r),c(t,h+1))&&l(c(t,n),c(t,r),c(t,h))&&(u[0]=c(t,n),u[1]=c(t,r),s[0]=c(t,h),s[1]=c(t,h+1),i=e(u,s),f(c(t,n),i)<a))return!1;return!0}function g(t,n,e,r){var i=r||[];if(h(i),n<e)for(var a=n;a<=e;a++)i.push(t[a]);else{for(var a=0;a<=e;a++)i.push(t[a]);for(var a=n;a<t.length;a++)i.push(t[a])}return i}function x(t){for(var n=[],e=[],r=[],i=[],a=Number.MAX_VALUE,o=0;o<t.length;++o)if(p(t,o))for(var u=0;u<t.length;++u)if(d(t,o,u)){e=x(g(t,o,u,i)),r=x(g(t,u,o,i));for(var l=0;l<r.length;l++)e.push(r[l]);e.length<a&&(n=e,a=e.length,n.push([c(t,o),c(t,u)]))}return n}function b(t){var n=x(t);return n.length>0?w(t,n):[t]}function w(t,n){if(0===n.length)return[t];if(n instanceof Array&&n.length&&n[0]instanceof Array&&2===n[0].length&&n[0][0]instanceof Array){for(var e=[t],r=0;r<n.length;r++)for(var i=n[r],a=0;a<e.length;a++){var o=e[a],u=w(o,i);if(u){e.splice(a,1),e.push(u[0],u[1]);break}}return e}var i=n,r=t.indexOf(i[0]),a=t.indexOf(i[1]);return-1!==r&&-1!==a&&[g(t,r,a),g(t,a,r)]}function k(t){var n,e=t;for(n=0;n<e.length-1;n++)for(var i=0;i<n-1;i++)if(r(e[n],e[n+1],e[i],e[i+1]))return!1;for(n=1;n<e.length-2;n++)if(r(e[0],e[e.length-1],e[n],e[n+1]))return!1;return!0}function I(t,n,e,r,i){i=i||0;var a=n[1]-t[1],o=t[0]-n[0],u=a*t[0]+o*t[1],l=r[1]-e[1],s=e[0]-r[0],f=l*e[0]+s*e[1],c=a*s-l*o;return T(c,0,i)?[0,0]:[(s*u-o*f)/c,(a*f-l*u)/c]}function N(t,n,e,r,i,s,h){s=s||100,h=h||0,i=i||25,n=void 0!==n?n:[],e=e||[],r=r||[];var y=[0,0],m=[0,0],d=[0,0],g=0,x=0,b=0,w=0,k=0,P=0,T=0,E=[],M=[],O=t,A=t;if(A.length<3)return n;if(++h>s)return console.warn("quickDecomp: max level ("+s+") reached."),n;for(var j=0;j<t.length;++j)if(p(O,j)){e.push(O[j]),g=x=Number.MAX_VALUE;for(var S=0;S<t.length;++S)a(c(O,j-1),c(O,j),c(O,S))&&l(c(O,j-1),c(O,j),c(O,S-1))&&(d=I(c(O,j-1),c(O,j),c(O,S),c(O,S-1)),u(c(O,j+1),c(O,j),d)&&(b=f(O[j],d))<x&&(x=b,m=d,P=S)),a(c(O,j+1),c(O,j),c(O,S+1))&&l(c(O,j+1),c(O,j),c(O,S))&&(d=I(c(O,j+1),c(O,j),c(O,S),c(O,S+1)),a(c(O,j-1),c(O,j),d)&&(b=f(O[j],d))<g&&(g=b,y=d,k=S));if(P===(k+1)%t.length)d[0]=(m[0]+y[0])/2,d[1]=(m[1]+y[1])/2,r.push(d),j<k?(v(E,O,j,k+1),E.push(d),M.push(d),0!==P&&v(M,O,P,O.length),v(M,O,0,j+1)):(0!==j&&v(E,O,j,O.length),v(E,O,0,k+1),E.push(d),M.push(d),v(M,O,P,j+1));else{if(P>k&&(k+=t.length),w=Number.MAX_VALUE,k<P)return n;for(var S=P;S<=k;++S)o(c(O,j-1),c(O,j),c(O,S))&&l(c(O,j+1),c(O,j),c(O,S))&&(b=f(c(O,j),c(O,S)))<w&&(w=b,T=S%t.length);j<T?(v(E,O,j,T+1),0!==T&&v(M,O,T,A.length),v(M,O,0,j+1)):(0!==j&&v(E,O,j,A.length),v(E,O,0,T+1),v(M,O,T,j+1))}return E.length<M.length?(N(E,n,e,r,i,s,h),N(M,n,e,r,i,s,h)):(N(M,n,e,r,i,s,h),N(E,n,e,r,i,s,h)),n}return n.push(t),n}function P(t,n){for(var e=0,r=t.length-1;t.length>3&&r>=0;--r)s(c(t,r-1),c(t,r),c(t,r+1),n)&&(t.splice(r%t.length,1),e++);return e}function T(t,n,e){return e=e||0,Math.abs(t-n)<e}t.exports={decomp:b,quickDecomp:N,isSimple:k,removeCollinearPoints:P,makeCCW:y};var E=[],M=[],O=[],A=[]}]);